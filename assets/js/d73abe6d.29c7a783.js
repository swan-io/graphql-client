"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[165],{3536:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>u,contentTitle:()=>t,default:()=>o,frontMatter:()=>l,metadata:()=>a,toc:()=>c});var s=n(4848),i=n(8453);const l={title:"useQuery",sidebar_label:"useQuery"},t=void 0,a={id:"use-query",title:"useQuery",description:"useQuery(query, variables, config?)",source:"@site/docs/use-query.md",sourceDirName:".",slug:"/use-query",permalink:"/graphql-client/use-query",draft:!1,unlisted:!1,editUrl:"https://github.com/swan-io/graphql-client/edit/main/docs/docs/use-query.md",tags:[],version:"current",frontMatter:{title:"useQuery",sidebar_label:"useQuery"},sidebar:"docs",previous:{title:"Getting started",permalink:"/graphql-client/getting-started"},next:{title:"useDeferredQuery",permalink:"/graphql-client/use-deferred-query"}},u={},c=[{value:"useQuery(query, variables, config?)",id:"usequeryquery-variables-config",level:2},{value:"Params",id:"params",level:3},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:2}];function d(e){const r={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h2,{id:"usequeryquery-variables-config",children:"useQuery(query, variables, config?)"}),"\n",(0,s.jsx)(r.h3,{id:"params",children:"Params"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"query"}),": your query document node"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"variables"}),": your query variables"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"config"})," (optional)","\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"suspense"}),": use React Suspense (default: ",(0,s.jsx)(r.code,{children:"false"}),")"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"optimize"}),": adapt query to only require data that's missing from the cache (default: ",(0,s.jsx)(r.code,{children:"false"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"returns",children:"Returns"}),"\n",(0,s.jsxs)(r.p,{children:["This hook returns a tuple you can extract like a ",(0,s.jsx)(r.code,{children:"useState"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:"const [data, {isLoading, refresh, reload, setVariables}] = useQuery(...)\n"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"data"})," (",(0,s.jsx)(r.code,{children:"AsyncData<Result<Data, ClientError>>"}),"): the GraphQL response"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"isLoading"})," (",(0,s.jsx)(r.code,{children:"boolean"}),"): if the query is fetching"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"refresh()"}),": refresh the query in the background, keeping current data on screen"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"reload()"}),": reload the query (full reload, showing a full loading state and resets local variables)"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"setVariables(variables)"}),": overwrites the variables locally, useful for ",(0,s.jsx)(r.code,{children:"before"})," & ",(0,s.jsx)(r.code,{children:"after"})," pagination"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ts",children:'import { useQuery } from "@swan-io/graphql-client";\n// ...\n\nconst userPageQuery = graphql(`\n  query UserPage($userId: ID!) {\n    user(id: $userId) {\n      id\n      username\n      avatar\n    }\n  }\n`);\n\ntype Props = {\n  userId: string;\n};\n\nconst UserPage = ({ userId }: Props) => {\n  const [user] = useQuery(userPageQuery, { userId });\n\n  return user.match({\n    NotAsked: () => null,\n    Loading: () => <LoadingIndicator />,\n    Done: (result) =>\n      result.match({\n        Error: (error) => <ErrorIndicator error={error} />,\n        Ok: (user) => <UserDetails user={user} />,\n      }),\n  });\n};\n'})})]})}function o(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>t,x:()=>a});var s=n(6540);const i={},l=s.createContext(i);function t(e){const r=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(l.Provider,{value:r},e.children)}}}]);